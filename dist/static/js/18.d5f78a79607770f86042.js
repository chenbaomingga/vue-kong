webpackJsonp([18],{tUyT:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("Hmpo"),s=t.n(a),o=t("vYJH"),l=t.n(o),u=t("2S+2"),i=t("T452"),m=t("rV7I"),n={data:function(){return{rules:{name:{required:!0,message:"请输入用户名称",trigger:"blur"},strip_uri:{required:!1,message:"请输入",trigger:"blur"},hosts:{required:!0,message:"请输入域",trigger:"blur"},methods:{required:!0,message:"请输入发送方式",trigger:"blur"},http_if_terminated:{required:!1,message:"请输入",trigger:"blur"},https_only:{required:!1,message:"请输入",trigger:"blur"},retries:{required:!1,message:"请输入失败重试次数",trigger:"blur"},uris:{required:!0,message:"请输入匹配路径",trigger:"blur"},preserve_host:{required:!1,message:"请输入",trigger:"blur"},upstream_connect_timeout:{required:!1,message:"请输入超时时间",trigger:"blur"},upstream_read_timeout:{required:!1,message:"请输入连续读取操作",trigger:"blur"},upstream_send_timeout:{required:!1,message:"请输入连续写入操作",trigger:"blur"},upstream_url:{required:!0,message:"请输入转发地址",trigger:"blur"}},ruleForm:{id:this.$route.params.id,name:"",strip_uri:!0,hosts:[],methods:[],http_if_terminated:!1,https_only:!1,retries:null,uris:[],preserve_host:!1,upstream_connect_timeout:"",upstream_read_timeout:"",upstream_send_timeout:"",upstream_url:""}}},created:function(){0!=this.ruleForm.id&&this.apiInfo()},methods:{submitForm:function(e){var r=this,t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;0==r.ruleForm.id?t.request(u.a):t.request(u.e)})},request:function(e){var r=this;return l()(s.a.mark(function t(){var a,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.ruleForm,t.next=3,e(a);case 3:o=t.sent,r.loading=!0,o.data.code==i.d?(r.$router.push({path:"/api"}),r.loading=!1):Object(m.Message)(o.data.message);case 6:case"end":return t.stop()}},t,r)}))()},apiInfo:function(){var e=this;return l()(s.a.mark(function r(){var t,a;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e,a={id:e.$route.params.id},r.next=4,Object(u.d)(a).then(function(e){e.data.code==i.d?(t.ruleForm.name=e.data.data.name,t.ruleForm.strip_uri=e.data.data.strip_uri,t.ruleForm.hosts=e.data.data.hosts,t.ruleForm.methods=e.data.data.methods,t.ruleForm.http_if_terminated=e.data.data.http_if_terminated,t.ruleForm.https_only=e.data.data.https_only,t.ruleForm.retries=e.data.data.retries,t.ruleForm.uris=e.data.data.uris,t.ruleForm.preserve_host=e.data.data.preserve_host,t.ruleForm.upstream_connect_timeout=e.data.data.upstream_connect_timeout,t.ruleForm.upstream_read_timeout=e.data.data.upstream_read_timeout,t.ruleForm.upstream_send_timeout=e.data.data.upstream_send_timeout,t.ruleForm.upstream_url=e.data.data.upstream_url,t.loading=!1):Object(m.Message)(e.data.message),t.loading=!0});case 4:case"end":return r.stop()}},r,e)}))()},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){var r=this.ruleForm.hosts.indexOf(e);-1!==r&&this.ruleForm.hosts.splice(r,1)},addDomain:function(){this.ruleForm.hosts.push("")},removeUri:function(e){var r=this.ruleForm.uris.indexOf(e);-1!==r&&this.ruleForm.uris.splice(r,1)},addUri:function(){this.ruleForm.uris.push("")}}},p={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"api名称：",prop:"name"}},[t("el-input",{attrs:{name:"name",type:"text",placeholder:"api名称"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),e._l(e.ruleForm.hosts,function(r,a){return t("el-form-item",{key:a,attrs:{label:"域名：",rules:{required:!0,message:"域名不能为空",trigger:"blur"}}},[t("el-input",{attrs:{model:r}}),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=a,expression:"index != 0"}],on:{click:function(t){t.preventDefault(),e.removeDomain(r)}}},[e._v("删除")])],1)}),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.addDomain}},[e._v("新增域名")])],1),e._v(" "),t("el-form-item",{attrs:{label:"发送方式：",prop:"methods"}},[t("el-checkbox-group",{model:{value:e.ruleForm.methods,callback:function(r){e.$set(e.ruleForm,"methods",r)},expression:"ruleForm.methods"}},[t("el-checkbox",{attrs:{label:"POST"}}),e._v(" "),t("el-checkbox",{attrs:{label:"GET"}})],1)],1),e._v(" "),e._l(e.ruleForm.uris,function(r,a){return t("el-form-item",{key:a,attrs:{label:"匹配路径：",rules:{required:!0,message:"匹配路径不能为空",trigger:"blur"}}},[t("el-input",{attrs:{model:r}}),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=a,expression:"index != 0"}],on:{click:function(t){t.preventDefault(),e.removeUri(r)}}},[e._v("删除")])],1)}),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.addUri}},[e._v("新增匹配路径")])],1),e._v(" "),t("el-form-item",{attrs:{label:"转发地址：",prop:"upstream_url"}},[t("el-input",{attrs:{name:"upstream_url",type:"text",placeholder:"转发地址"},model:{value:e.ruleForm.upstream_url,callback:function(r){e.$set(e.ruleForm,"upstream_url",r)},expression:"ruleForm.upstream_url"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"strip_uri：",prop:"strip_uri"}},[t("el-radio",{attrs:{label:"true"},model:{value:e.ruleForm.strip_uri,callback:function(r){e.$set(e.ruleForm,"strip_uri",r)},expression:"ruleForm.strip_uri"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:e.ruleForm.strip_uri,callback:function(r){e.$set(e.ruleForm,"strip_uri",r)},expression:"ruleForm.strip_uri"}},[e._v("否")])],1),e._v(" "),t("el-form-item",{attrs:{label:"preserve_host：",prop:"preserve_host"}},[t("el-radio",{attrs:{label:"true"},model:{value:e.ruleForm.preserve_host,callback:function(r){e.$set(e.ruleForm,"preserve_host",r)},expression:"ruleForm.preserve_host"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:e.ruleForm.preserve_host,callback:function(r){e.$set(e.ruleForm,"preserve_host",r)},expression:"ruleForm.preserve_host"}},[e._v("否")])],1),e._v(" "),t("el-form-item",{attrs:{label:"失败重试次数：",prop:"retries"}},[t("el-input",{attrs:{name:"retries",type:"text",placeholder:"失败重试次数"},model:{value:e.ruleForm.retries,callback:function(r){e.$set(e.ruleForm,"retries",r)},expression:"ruleForm.retries"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"连接超时时间：",prop:"upstream_connect_timeout"}},[t("el-input",{attrs:{name:"upstream_connect_timeout",type:"text",placeholder:"连接超时时间"},model:{value:e.ruleForm.upstream_connect_timeout,callback:function(r){e.$set(e.ruleForm,"upstream_connect_timeout",r)},expression:"ruleForm.upstream_connect_timeout"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"连续写入操作：",prop:"upstream_send_timeout"}},[t("el-input",{attrs:{name:"upstream_send_timeout",type:"text",placeholder:"连续写入操作"},model:{value:e.ruleForm.upstream_send_timeout,callback:function(r){e.$set(e.ruleForm,"upstream_send_timeout",r)},expression:"ruleForm.upstream_send_timeout"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"连续读取操作：",prop:"upstream_read_timeout"}},[t("el-input",{attrs:{name:"upstream_read_timeout",type:"text",placeholder:"连续读取操作"},model:{value:e.ruleForm.upstream_read_timeout,callback:function(r){e.$set(e.ruleForm,"upstream_read_timeout",r)},expression:"ruleForm.upstream_read_timeout"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"端口服务：",prop:"https_only"}},[t("el-radio",{attrs:{label:"true"},model:{value:e.ruleForm.https_only,callback:function(r){e.$set(e.ruleForm,"https_only",r)},expression:"ruleForm.https_only"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:e.ruleForm.https_only,callback:function(r){e.$set(e.ruleForm,"https_only",r)},expression:"ruleForm.https_only"}},[e._v("否")])],1),e._v(" "),t("el-form-item",{attrs:{label:"PROTO头：",prop:"http_if_terminated"}},[t("el-radio",{attrs:{label:"true"},model:{value:e.ruleForm.http_if_terminated,callback:function(r){e.$set(e.ruleForm,"http_if_terminated",r)},expression:"ruleForm.http_if_terminated"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:e.ruleForm.http_if_terminated,callback:function(r){e.$set(e.ruleForm,"http_if_terminated",r)},expression:"ruleForm.http_if_terminated"}},[e._v("否")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),t("el-button",{on:{click:function(r){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]},_=t("D8HT")(n,p,!1,null,null,null);r.default=_.exports}});
//# sourceMappingURL=18.d5f78a79607770f86042.js.map